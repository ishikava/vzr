$(document).ready(function ($) {"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function _createClass(t,e,a){return e&&_defineProperties(t.prototype,e),a&&_defineProperties(t,a),t}function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var DatePicker=function(){function n(t){var a=this;_classCallCheck(this,n),_defineProperty(this,"cutLastWeek",function(){var t=a.datepicker.container.find(".drp-calendar.single .table-condensed tbody tr"),e=t.first(),t=t.last();e.find("td").length===e.find(".off").length&&10<parseInt(e.find("td").last().html())&&e.addClass("h-hide"),t.find("td").length===t.find(".off").length&&parseInt(t.find("td").html())<20&&t.addClass("h-hide")}),this.$element=$(t);t=$(this.$element).attr("data-datepicker-lang");t&&moment.locale(t);var e,s,t=moment();if(window.test=t,this.options={format:"DD.MM.YYYY",singleDatePicker:!0,showDropdowns:!0,minYear:1901,maxYear:parseInt(moment().format("YYYY"),10),locale:{monthNames:moment.months()},autoUpdateInput:!$(this.$element).is("[data-datepicker-empty-init]"),minDate:$(this.$element).attr("data-min-date")?$(this.$element).attr("data-min-date"):"",maxDate:$(this.$element).attr("data-max-date")?$(this.$element).attr("data-max-date"):""},this.datepickerType=$(this.$element).attr("data-datepicker-type"),this.datepickerType)switch(this.datepickerType){case"0-60":e=moment().subtract(1,"days"),this.options.minDate=moment().subtract(60,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"0-61":e=moment(),this.options.minDate=moment().subtract(61,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"0-64":e=moment(),this.options.minDate=moment().subtract(64,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"0-65":e=moment(),this.options.minDate=moment().subtract(66,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"18-65":e=moment().subtract(18,"years"),this.options.minDate=moment().subtract(66,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"18-60":e=moment().subtract(18,"years"),this.options.minDate=moment().subtract(61,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"7-60":e=moment().subtract(7,"years"),this.options.minDate=moment().subtract(61,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"3-17":e=moment().subtract(3,"years"),this.options.minDate=moment().subtract(18,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"min18":e=moment().subtract(18,"years"),this.options.minDate=moment().subtract(80,"years"),this.options.maxDate=e,this.options.startDate=e;break;case"min16":e=moment().subtract(16,"years"),this.options.minDate=moment().subtract(100,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"min15":e=moment().subtract(15,"years"),this.options.minDate=moment().subtract(101,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"max14":e=moment(),this.options.minDate=moment().subtract(15,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"18-100":e=moment().subtract(18,"years"),this.options.minDate=moment().subtract(101,"years").add(1,"days"),this.options.maxDate=e,this.options.startDate=e;break;case"passport":this.options.minDate=moment().subtract(100,"years"),this.options.maxDate=moment();break;case"1-now":s=moment().subtract(1,"years"),this.options.minDate=s,this.options.maxDate=moment(),this.options.startDate=moment();break;case"3-now":s=moment().subtract(3,"years"),this.options.minDate=s,this.options.maxDate=moment(),this.options.startDate=moment();break;case"repairsInsuranceStart":s=moment().add(7,"days"),this.options.minDate=s,this.options.maxDate=moment().add(1,"years"),this.options.startDate=s;break;case"repairsOnOffInsuranceStart":s=moment().add(14,"days"),this.options.minDate=s,this.options.maxDate=moment().add(1,"years"),this.options.startDate=s;break;case"neighborsInsuranceStart":s=moment().add(8,"days"),this.options.minDate=s,this.options.maxDate=moment().add(1,"years"),this.options.startDate=s;break;case"mortgageSigning":s=moment().subtract(30,"years"),this.options.minDate=s,this.options.maxDate=moment(),this.options.startDate=moment();break;case"mortgage":s=moment(),this.options.minDate=s,this.options.maxDate=moment().add(2,"months"),this.options.startDate=s;break;case"departureDate":s=moment().add(1,"days"),this.options.minDate=s,this.options.maxDate=moment(s).add(1,"months"),this.options.startDate=s;break;case"alphaOfficeStart":s=moment().add(10,"days"),this.options.minDate=s,this.options.maxDate=moment(s).add(3,"months"),this.options.startDate=s;break;case"coronavirus":case"virus_protection":e=void 0!==this.$element.data("days")?(s=moment().add(this.$element.data("days"),"days"),moment().add(this.$element.data("days-to"),"days")):(s=moment().add(1,"days"),moment(s).add(1,"years")),this.options.minDate=s,this.options.maxDate=e,this.options.startDate=s;break;case"aviationStartDate":case"aviationEuroStartDate":s=moment().add(1,"days"),this.options.minDate=s,this.options.maxDate=moment().add(2,"months"),this.options.startDate=s;break;case"greenCardStart":s=moment().add(1,"days"),this.options.minDate=s,this.options.maxDate=moment().add(1,"months"),this.options.startDate=s;break;case"aviationEuroEndDate":s=moment().add(7,"days"),this.options.minDate=s,this.options.maxDate=moment().add(1,"years"),this.options.startDate=s;break;case"unlim":this.options.minDate=moment().subtract(100,"years"),this.options.maxDate=moment().add(100,"years"),this.options.startDate=moment();break;case"dmsPolicyStart":s=moment().add(5,"days"),this.options.minDate=s,this.options.maxDate=moment().add(2,"months"),this.options.startDate=s;break;case"greenCardStartDate":s=moment().add(5,"days"),this.options.minDate=s,this.options.maxDate=moment().add(30,"days"),this.options.startDate=s;break;case"onlyPast":this.options.minDate=moment().subtract(100,"years"),this.options.maxDate=moment(),this.options.startDate=moment();break;case"onlyFuture":this.options.minDate=moment(),this.options.maxDate=moment().add(100,"years"),this.options.startDate=moment();break;case"kbmCheckDate":this.options.minDate=moment().subtract(1,"years").subtract(60,"days"),this.options.maxDate=moment(),this.options.startDate=moment();break;default:s=moment().add(1,"days"),this.options.minDate=s,this.options.maxDate=moment().add(2,"months"),this.options.startDate=s}t=$(this.$element).attr("data-datepicker-start-date");t&&(this.options.startDate=moment(t,"DD.MM.YYYY")),$(this.$element).daterangepicker(this.options,function(t,e,a){}),this.datepicker=$(this.$element).data("daterangepicker"),$(this.$element).is("[data-datepicker-empty-init]")&&$(this.$element).on("apply.daterangepicker",function(t,e){$(this).val(e.startDate.format("DD.MM.YYYY"))}),this.setListeners()}return _createClass(n,[{key:"setListeners",value:function(){var n=this;$(this.$element).on("showCalendar.daterangepicker",function(t,e){e.container.find("select").each(function(t,e){var a=null;$(e).data("select2")||$(e).select2({dropdownParent:$(e).parent(),theme:"like-link"}).on("select2:open",function(){setTimeout(function(){a=Scrollbar.init(n.datepicker.container[0].querySelector(".select2-dropdown"),{damping:.06,thumbMinSize:33,renderByPixels:!0,alwaysShowTracks:!0,continuousScrolling:!0})},10)}).on("select2:close",function(){a&&a.destroy()})}),n.cutLastWeek();var a=$(n.$element).parent().height()+$(n.$element).parent().offset().top-window.pageYOffset,s=window.pageYOffset+window.innerHeight,e=$(".drp-calendar");s-a<n.datepicker.container.height()?(n.datepicker.drops="up",e.addClass("drp-calendar-up")):(n.datepicker.drops="down",e.removeClass("drp-calendar-up"))}),$(this.$element).on("apply.daterangepicker",function(t){0<$(t.target).parents(".js-parent-input-error").length&&void 0!==$(t.target).valid&&$(t.target).valid()}),$(this.$element).on("blur",function(){$(n.$element).is("[data-datepicker-autocorrect]")&&(n.correctDate($(n.$element)),$(n.$element).trigger("input"))})}},{key:"correctDate",value:function(t){var e=moment(t.val(),"DD.MM.YYYY"),a=moment(t.val(),"DD.MM.YYYY").format("DD.MM.YYYY")==t.val(),s=t.data("daterangepicker").minDate,n=t.data("daterangepicker").maxDate;if(""===t.val())return"";(e<s||!a)&&t.val(s.format("DD.MM.YYYY")),n<e&&t.val(n.format("DD.MM.YYYY"))}}]),n}();window.initDatePicker=function(t){moment.locale("ru"),(t=t||$(document)).find(".js-datepicker").each(function(t,e){return new DatePicker(e)})},$(function(){window.initDatePicker()});})