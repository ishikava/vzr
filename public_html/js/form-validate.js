$(document).ready(function ($) {"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,a){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,a){for(var e=0;e<a.length;e++){var r=a[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,a,e){return a&&_defineProperties(t.prototype,a),e&&_defineProperties(t,e),t}!function(){$.extend($.validator.messages,{required:"Поле не заполнено",remote:"пожалуйста, введите правильное значение",email:"Email адрес не указан, или указан в некорректном формате",url:"пожалуйста, введите корректный URL",date:"Указана некорректная дата",dateISO:"пожалуйста, введите корректную дату в формате ISO",number:"пожалуйста, введите число",digits:"пожалуйста, вводите только цифры",creditcard:"пожалуйста, введите правильный номер кредитной карты",equalTo:"пожалуйста, введите такое же значение ещё раз",extension:"пожалуйста, выберите файл с правильным расширением",maxlength:$.validator.format("пожалуйста, введите не больше {0} символов"),minlength:$.validator.format("не менее {0} символов"),rangelength:$.validator.format("пожалуйста, введите значение длиной от {0} до {1} символов"),range:$.validator.format("пожалуйста, введите число от {0} до {1}"),max:$.validator.format("пожалуйста, введите число, меньшее или равное {0}"),min:$.validator.format("пожалуйста, введите число, большее или равное {0}")}),$.validator.addMethod("requiredSecond",function(t,a){return 0!==t.length},"Обязательное поле."),$.validator.addMethod("realemail",function(t,a){return 0===t.length||/^[А-ЯA-Z0-9._%+-]+@[А-ЯA-Z0-9.-]+\.[А-ЯA-Z]{2,20}$/i.test(t)},"Укажите корректный адрес электронной почты"),$.validator.addMethod("realphone",function(t,a){return/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){11,14}(\s*)?$/.test(t)},"Введите существующий номер телефона"),$.validator.addMethod("realphone-or-empty",function(t,a){return 0===t.length||/^(\s*)?(\+)?([- _():=+]?\d[- _():=+]?){11,14}(\s*)?$/.test(t)},"Введите существующий номер телефона"),$.validator.addMethod("serial-number",function(t,a){return["CAS","ALZ","GVA","BLT","BST","SG","GA"].indexOf(t.toUpperCase())<0},'Для урегулирования страхового случая по указанному полису перейдите по ссылке <a href="https://www.Vzr.ru/accident/needed_medical_while_traveling/">https://www.Vzr.ru/accident/needed_medical_while_traveling/</a>'),$.validator.addMethod("cyrillicName",function(t,a){return!t.length||/^[а-яА-ЯЁё -]+$/gi.test(t)},"Разрешен ввод символов кириллицы, тире и пробела"),$.validator.addMethod("cyrillicOnly",function(t,a){return/^[а-яА-ЯЁё]+$/gi.test(t)},"Вы можете использовать только кириллические cимволы"),$.validator.addMethod("latin-number",function(t,a){return/^[1-9a-zA-Z]+$/gi.test(t)},"Вы можете использовать только латиницу и цифры"),$.validator.addMethod("policy-number",function(t,a){return/^[а-яА-ЯёЁ0-9-\/]+$/gi.test(t)},"Вы можете использовать только кириллицу и цифры"),$.validator.addMethod("no-all-repeat",function(t,a){a=parseInt($(a).data("ruleMaxlength")),a=a||8;return!(t.length>=a)||1!==Array.from(new Set(t.split(""))).length},"Все символы не могут быть одинаковыми"),$.validator.addMethod("autocomplete-input",function(t,a){return"true"===$(a).attr("data-is-select")},"Выберите значение из списка"),$.validator.addMethod("your-calc-min",function(t,a){return parseInt($(a).attr("data-rule-your-calc-min"),10)<=$(a).data("rawValue")},"введите число, больше или равное 50 000"),$.validator.addMethod("your-calc-max",function(t,a){var e=parseInt($(a).attr("data-rule-your-calc-max"),10);return $(a).data("rawValue")<=e},"введите число, меньше или равное 500 000"),$.validator.addMethod("your-calc-creditmin",function(t,a){return parseFloat($(a).attr("data-rule-your-calc-creditmin"))<=($(a).data("rawValue")?parseFloat($(a).data("rawValue").replace(",",".")):0)},function(t,a){a=$(a).data("rule-your-calc-creditmin").toString().replace(/\B(?=(\d{3})+(?!\d))/g,"&nbsp;");return"введите число, больше или равное ".concat(a)}),$.validator.addMethod("your-calc-creditmax",function(t,a){var e=parseFloat($(a).attr("data-rule-your-calc-creditmax"));return($(a).data("rawValue")?parseFloat($(a).data("rawValue").replace(",",".")):0)<=e},function(t,a){a=$(a).data("rule-your-calc-creditmax").toString().replace(/\B(?=(\d{3})+(?!\d))/g,"&nbsp;");return"введите число, меньше или равное ".concat(a)}),$.validator.addMethod("proc",function(t,a){var e=parseFloat($(a).data("max")),a=parseFloat($(a).data("rawValue").replace(",","."));return a<=e&&0<=a},function(t,a){a=$(a).data("max").toString();return"введите число от 0 до ".concat(a)}),$.validator.addMethod("daterange",function(t,a){var e=$(a).data("daterangepicker"),r=moment(t,"DD.MM.YYYY"),a=e.minDate.format("YYYY-MM-DD"),e=e.maxDate.format("YYYY-MM-DD"),e=r.isBetween(a,e,null,"[]"),r=r.isValid();return e&&r&&10<=t.length},"Некорректная дата"),$.validator.addMethod("time24",function(t){if(5!==t.length)return!1;var a=parseInt(t.split(":")[0]),t=parseInt(t.split(":")[1]);return a<=23&&t<=59},"Время должно быть указано от 00:00 до 23:59"),$.validator.addMethod("file",function(t,a){return!!$(a).attr("data-rule-osagomultiple")||(!!$(a).attr("data-rule-skip")||($(a).attr("data-rule-file-list")?0<$(a).parent().find($(a).attr("data-rule-file-list")).children().length:t))},"Необходимо добавить скан документа"),$.validator.addMethod("osagomultiple",function(t,a){return 0<$(a).data("osagoMultipleFiles")},"Необходимо добавить скан документов"),$.validator.addMethod("max60",function(t,a){return moment().diff(moment(t,"DD.MM.YYYY"),"year")<=60&&10<=t.length},"Застрахованы могут быть&nbsp;лица&nbsp;до&nbsp;60&nbsp;лет."),$.validator.addMethod("datemin1year",function(t,a){$(a).data("daterangepicker");t=moment(t,"DD.MM.YYYY");return 1<moment().diff(t,"years",!0)},"Для возрастной группы от 0 до 1 года нет доступных программ"),$.validator.addMethod("cyrillic",function(t,a){return/[а-яА-ЯЁё]/gi.test(t)},"Вы можете использовать только кириллические cимволы (А-Я)"),$.validator.addMethod("password",function(t,a){return!(t.length<6)},"Пароль должен содержать от 6 до 21 символов"),$.validator.addMethod("inn",function(t,a){return 0===t.length||10===t.length||12===t.length},"ИНН должен содержать 10 либо 12 символов"),$.validator.addMethod("account-number",function(t,a){a=$($(a).data("bik")).val();if(a.length<3)return!0;var e=0,r=[7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1,3,7,1],o=(a.substring(a.length-3)+t).split("");if(o.length!==r.length)return!1;for(var n=0;n<r.length;n++)e+=r[n]*o[n]%10;return e%10==0},"Указанный Р/С не принадлежит введенному банку"),$.validator.addMethod("kpp-optional",function(t,a){return 0===t.length||9===t.length},"КПП должен содержать 9 символов"),$.validator.addMethod("vin",function(t,a){return/^[0-9abcdefghjklmnprstuvwxyzABCDEFGHJKLMNPRSTUVWXYZ]+$/i.test(t)},"Не допускается использовать буквы I, O, Q и символы кириллицы"),$.validator.addMethod("pnr",function(t,a){return/[a-zA-Zа-яА-ЯЁё0-9]+$/i.test(t)},"вы можете использовать только цифры и латинские (русские) буквы"),$.validator.addMethod("dadata",function(t,a){return!$(a).hasClass("dadata-error")},"Выберите город из списка"),$.validator.addMethod("file-type",function(t,a){var e=$(a).attr("data-file-types").split(","),a=a.files[0].name.split(".").pop().trim().toLowerCase();return-1!==e.indexOf(a)},"недопустимый формат файла"),$.validator.addMethod("validRegFileSizeMin",function(t,a,e){return this.optional(a)||1<=a.files[0].size&&a.files[0].size<e}),$.validator.addMethod("min-float-value",function(t,a){return parseFloat($(a).data("rule-min-float-value"))<=parseFloat($(a).val().replace(",","."))},function(t,a){return"введите число, больше или равное ".concat($(a).data("rule-min-float-value"))}),$.validator.addMethod("max-float-value",function(t,a){var e=parseFloat($(a).data("rule-max-float-value"));return parseFloat($(a).val().replace(",","."))<=e},function(t,a){return"введите число, меньше или равноее ".concat($(a).data("rule-max-float-value"))}),$.validator.addMethod("requiredIfEmptyOther",function(t,a,e){if(t.length)return!0;e=$(a).closest("form").find(e);return!!e.length&&e.val().length},"Укажите телефон и e-mail");var o=!0;$.validator.addMethod("required-checkbox-one-of-them",function(t,a,e){var a=$(a).closest("form"),r=a.find('[data-rule-required-checkbox-one-of-them="'.concat(e,'"]')),e=a.find('[data-rule-required-checkbox-one-of-them="'.concat(e,'"]:checked'));return o&&(o=!1,r.on("change",function(){r.valid()})),!!e.length},"Выберите один из пунктов"),$.validator.addMethod("policy-number-with-latin",function(t,a){return/^[а-яА-ЯёЁa-zA-Z0-9-\/]+$/gi.test(t)},"Вы можете использовать только кириллицу, латиницу, цифры, дефис и слэш."),$.validator.addMethod("float-number",function(t,a){return!t.length||(t=t.replace(" ","").replace(",","."),0===Number(t)||!!Number(t))},"Введите сумму в формате 111 111,11."),$.validator.addMethod("required-if-not-readonly",function(t,a){return a.readOnly||!!t},"Обязательное поле."),$.validator.addMethod("eosago-policy-number",function(t,a){return/^[a-zA-Zа-яА-ЯёЁ0-9-\/]+$/gi.test(t)},"Вы можете использовать кириллицу, латиницу и цифры"),$.validator.addMethod("snils",function(t,a){return 0===t.length||/^\d{3}-\d{3}-\d{3}\s\d{2}$/.test(t)},"Введите корректный СНИЛС");var i="formValidate",e={errorClass:"is-error",validClass:"is-valid",errorElement:"span",errorTextElement:"span",submitSelector:".js-submit",submitSelectors:".js-submit, .js-fake-submit",ignoreSelector:".is-validate-ignore",parentForErrorSelector:".js-parent-input-error",errorSelector:".input__message",dataToSend:{},onCallback:null},t=function(){function l(t,a){_classCallCheck(this,l);var o=this;o.$form=$(t),o.defaults=e,o.options=$.extend({},o.defaults,$(t).data(),a),o.$form.validate({ignore:o.options.ignoreSelector,errorClass:o.options.errorClass,validClass:o.options.validClass,errorElement:o.options.errorElement,focusInvalid:!1,invalidHandler:function(t,a){var e,r;o.errorHandler(a.errorList),o.$form.hasClass("js-no-scroll-to-error")||(o.$form.hasClass("js-scroll-popup")?(e=$(a.errorList[0].element).offset().top,r=$(".mfp-wrap.mfp-ready"),$(r).animate({scrollTop:e-r.offset().top+r.scrollTop()-15},300)):(r=a.errorList[0].element,a=40,(t=$(t.target).attr("data-offset-top"))&&(a=$(t).height()),$(r).hasClass("h-hide")&&(r=$(r).parent()),a=$(r).offset().top-(a+10),$("html, body").animate({scrollTop:a},300)))},errorPlacement:function(t,a){o.errorPlacement(t,a)},success:function(t,a,e){t.addClass("is-valid"),o.errorPlacement(a,e)},submitHandler:function(t,a){if(o.$form.hasClass("js-no-loader")||window.preloader.loaderShow(),("y"===o.$form.data("recaptcha-invbisible")||void 0!==o.$form.data("recaptcha-object"))&&"y"!==o.$form.data("recaptcha-success"))return void 0!==o.$form.data("recaptcha-object")?grecaptcha.execute(o.$form.data("recaptcha-object")):grecaptcha.execute(askRequestForm),!1;o.$form.hasClass("js-no-ajax")?t.submit():o.submitHandler()}}),o.setListeners(),this.$form[0].formValidate=this}return _createClass(l,[{key:"setListeners",value:function(){var a=this,t=a.options;a.$form.on("click",t.submitSelector,function(t){t.preventDefault(),a.$form.submit()})}},{key:"setCallback",value:function(t){this.options.onCallback=t}},{key:"setCallbackError",value:function(t){this.options.setCallbackError=t}},{key:"setDataToSend",value:function(t){this.options.dataToSend=t||{}}},{key:"submitHandler",value:function(){var e,a=this,r=a.options;a.$form.valid()&&(e=new FormData(a.$form[0]),$.each(r.dataToSend,function(t,a){e.append(t,a)}),$.ajax({method:a.$form.attr("method")||"post",dataType:"json",url:a.$form.attr("action"),data:e,processData:!1,contentType:!1,success:function(t){t.success?t.data&&t.data.formErrors?a.parseErrors(t.data.formErrors):null!=r.onCallback&&"function"==typeof r.onCallback?r.onCallback(t):t.data.redirectUrl?window.location.href=t.data.redirectUrl:window.location.reload():(console.error(t.error),null!=r.setCallbackError&&"function"==typeof r.setCallbackError&&r.setCallbackError(t))},error:function(t,a,e){}}))}},{key:"errorPlacement",value:function(t,a){var e=this.options,r=$(a).parents(e.parentForErrorSelector);0<r.length&&(0<(e=r.find(e.errorSelector)).length&&(e.find(".".concat($(a).attr("id"),"-error")).remove(),e.append(t)))}},{key:"errorHandler",value:function(t){}},{key:"parseErrors",value:function(t){var r=this,o=r.options;$.each(t,function(t,a){var e=r.$form.find("[name="+t+"]");0<e.length&&(e.addClass(o.errorClass).removeClass(o.validClass),(t=$("<"+o.errorTextElement+">")).addClass(o.errorClass),t.html(a),r.errorPlacement(t,e[0]))})}}],[{key:"_interface",value:function(n){return this.each(function(t,a){var e=$(a).data(i),r="object"===_typeof(n)?n:{},o="string"==typeof n?n:null;if(e||(e=new l(a,r),$(a).data(i,e)),o){if(void 0===e[o])throw new Error("No method named "+o);"function"==typeof e[o]&&e[o]()}})}}]),l}();$.fn[i]=t._interface,$(function(){$(".js-validate").formValidate()})}();})